<!-- Begin Page Content -->
<div class="container-fluid">
    <!-- Page Heading -->
    <h1>Consulta de Documentos</h1>

    <!-- DataTales Example -->
    <div class="card shadow mb-4 mt-5">
        <div class="card-header py-3">
            <mat-tab-group animationDuration="0ms" (click)="changeTab()">
                <mat-tab label="Pendiente"> 
                    <br>
                    <nav class="navbar justify-content-between mt-2">
                        <form class="form-inline ">
                            <label for="Buscar mr-4" style="margin-right: 10px !important;">Buscar Documento :</label>
                            <input class="form-control mr-sm-2" type="text" aria-label="Buscar" (keyup)="buscar(termino.value)" #termino>
                        </form>
                    </nav>
                    <div class="card-body ">
                        <div class="custom-scroll-dt" *ngIf="!loading">
                            <div class="text-center" *ngIf="listLegalizationsPending.length == 0">No hay datos</div>
                            <table mat-table [dataSource]="listLegalizationsPending" class="mat-elevation-z8 demo-table" *ngIf="listLegalizationsPending.length > 0">
                                <!-- Position Column -->
                                <ng-container matColumnDef="tipoDocumento">
                                  <th mat-header-cell *matHeaderCellDef> Tipo de Documento </th>
                                  <td mat-cell *matCellDef="let element"> {{element.documentType.name}} </td>
                                </ng-container>

                                <!-- Name Column -->
                                <ng-container matColumnDef="institucion">
                                  <th mat-header-cell *matHeaderCellDef> Institucion </th>
                                  <td mat-cell *matCellDef="let element"> {{element.academicInstitution.name}} </td>
                                </ng-container>

                                <!-- Weight Column -->
                                <ng-container matColumnDef="carrera">
                                  <th mat-header-cell *matHeaderCellDef> Carrera </th>
                                  <td mat-cell *matCellDef="let element"> {{element.career.name}} </td>
                                </ng-container>

                                <!-- Symbol Column -->
                                <ng-container matColumnDef="fecha">
                                  <th mat-header-cell *matHeaderCellDef> Fecha </th>
                                  <td mat-cell *matCellDef="let element"> {{ element.creationDate | date }} </td>
                                </ng-container>

                                <ng-container matColumnDef="empty-row">
                                    <mat-cell *matCellDef="let element">No Data</mat-cell>
                                </ng-container>

                                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                                <tr 
                                    mat-row
                                    (click)="mostrar(row)"
                                    [class.demo-row-is-clicked]="clickedRows.has(row)"
                                    *matRowDef="let row; columns: displayedColumns;"
                                ></tr>
                            </table>
                        </div>
                    </div>
                </mat-tab>
                <mat-tab label="Aprobada"> 
                    <br>
                    <nav class="navbar justify-content-between mt-2">
                        <form class="form-inline ">
                            <label for="Buscar mr-4" style="margin-right: 10px !important;">Buscar Documento :</label>
                            <input class="form-control mr-sm-2" type="text" aria-label="Buscar" (keyup)="buscar(termino.value)" #termino>
                        </form>
                    </nav>
                    <div class="card-body ">
                        <div class="custom-scroll-dt" *ngIf="!loading">
                            <div class="text-center" *ngIf="listLegalizationsApprove.length == 0">No hay datos</div>
                            <table mat-table [dataSource]="listLegalizationsApprove" class="mat-elevation-z8 demo-table" *ngIf="listLegalizationsApprove.length > 0">
                                <!-- Position Column -->
                                <ng-container matColumnDef="tipoDocumento">
                                  <th mat-header-cell *matHeaderCellDef> Tipo de Documento </th>
                                  <td mat-cell *matCellDef="let element"> {{element.documentType.name}} </td>
                                </ng-container>

                                <!-- Name Column -->
                                <ng-container matColumnDef="institucion">
                                  <th mat-header-cell *matHeaderCellDef> Institucion </th>
                                  <td mat-cell *matCellDef="let element"> {{element.academicInstitution.name}} </td>
                                </ng-container>

                                <!-- Weight Column -->
                                <ng-container matColumnDef="carrera">
                                  <th mat-header-cell *matHeaderCellDef> Carrera </th>
                                  <td mat-cell *matCellDef="let element"> {{element.career.name}} </td>
                                </ng-container>

                                <!-- Symbol Column -->
                                <ng-container matColumnDef="fecha">
                                  <th mat-header-cell *matHeaderCellDef> Fecha </th>
                                  <td mat-cell *matCellDef="let element"> {{ element.creationDate | date }} </td>
                                </ng-container>

                                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                                <tr 
                                    mat-row
                                    (click)="mostrar(row)"
                                    [class.demo-row-is-clicked]="clickedRows.has(row)"
                                    *matRowDef="let row; columns: displayedColumns;"
                                ></tr>
                            </table>
                        </div>
                    </div>
                </mat-tab>
                <mat-tab label="Rechazada">
                    <br>
                    <nav class="navbar justify-content-between mt-2">
                        <form class="form-inline ">
                            <label for="Buscar mr-4" style="margin-right: 10px !important;">Buscar Documento :</label>
                            <input class="form-control mr-sm-2" type="text" aria-label="Buscar" (keyup)="buscar(termino.value)" #termino>
                        </form>
                    </nav>
                    <div class="card-body ">
                        <div class="custom-scroll-dt" *ngIf="!loading">
                            <div class="text-center" *ngIf="listLegalizationsRejected.length == 0">No hay datos</div>
                            <table mat-table [dataSource]="listLegalizationsRejected" class="mat-elevation-z8 demo-table" *ngIf="listLegalizationsRejected.length > 0">
                                <!-- Position Column -->
                                <ng-container matColumnDef="tipoDocumento">
                                  <th mat-header-cell *matHeaderCellDef> Tipo de Documento </th>
                                  <td mat-cell *matCellDef="let element"> {{element.documentType.name}} </td>
                                </ng-container>

                                <!-- Name Column -->
                                <ng-container matColumnDef="institucion">
                                  <th mat-header-cell *matHeaderCellDef> Institucion </th>
                                  <td mat-cell *matCellDef="let element"> {{element.academicInstitution.name}} </td>
                                </ng-container>

                                <!-- Weight Column -->
                                <ng-container matColumnDef="carrera">
                                  <th mat-header-cell *matHeaderCellDef> Carrera </th>
                                  <td mat-cell *matCellDef="let element"> {{element.career.name}} </td>
                                </ng-container>

                                <!-- Symbol Column -->
                                <ng-container matColumnDef="fecha">
                                  <th mat-header-cell *matHeaderCellDef> Fecha </th>
                                  <td mat-cell *matCellDef="let element"> {{ element.creationDate | date }} </td>
                                </ng-container>

                                <ng-container matColumnDef="comentario">
                                    <th mat-header-cell *matHeaderCellDef> Comentario </th>
                                    <td mat-cell *matCellDef="let element"> {{ element.comment  }} </td>
                                </ng-container>

                                <ng-container matColumnDef="empty-row">
                                    <mat-cell *matCellDef="let element">No Data</mat-cell>
                                </ng-container>

                                <tr mat-header-row *matHeaderRowDef="displayedColumnsRejected"></tr>
                                <tr 
                                    mat-row
                                    (click)="mostrar(row)"
                                    [class.demo-row-is-clicked]="clickedRows.has(row)"
                                    *matRowDef="let row; columns: displayedColumnsRejected;"
                                ></tr>
                            </table>
                        </div>
                    </div>
                </mat-tab>
            </mat-tab-group>
        </div>
    </div>
</div>

<div class="container" *ngIf="loadingDocument">
    <div class="card shadow mb-2 mt-2">
        <div class="card-header py-3">
            <div class="row">
                <div class="col-md-5">
                    <h2>Documento: {{selectLegalization.documentType.name}}</h2>
                    <hr>
                    <br>
                    <div>
                        <pdf-viewer
                            [src]="pdfSrc"
                            [render-text]="true"
                            [original-size]="false"
                            style="width: 500px; height: 500px;"
                            class="text-center"
                        ></pdf-viewer>
                        <br>
                    </div>
                    <button mat-raised-button color="warn" (click)="descargarPDF()">Descargar PDF</button>   
                </div>
            </div>
        </div>
    </div>
</div>